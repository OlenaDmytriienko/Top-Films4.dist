(function(){"use strict";var e={5660:function(e,i,a){var s=a(9963),t=(a(7658),a(6252)),r=a(2262),n=a(3577),o=a.p+"img/1479.0498db91.gif",l=a.p+"img/cinema.f323d80d.png";const c={class:"container"},h={class:"header header-content"},g=(0,t._)("a",{href:"./index.html",class:"header__logo"},"Top Films",-1),d=(0,t._)("option",{value:""},null,-1),u=["value"],m=(0,t._)("option",{value:""},null,-1),p=(0,t._)("option",{value:"RATING"},"По рейтингу",-1),_=(0,t._)("option",{value:"YEAR"},"По году",-1),v=[m,p,_],f=(0,t._)("option",{value:"4"},"Мелодрама",-1),y=(0,t._)("option",{value:"5"},"Детектив",-1),w=(0,t._)("option",{value:"6"},"Фантастика",-1),k=(0,t._)("option",{value:"7"},"Приключения",-1),b=(0,t._)("span",null,null,-1),F={class:"container today"},S={class:"movie__today"},I={class:"movie1"},C=["src","alt"],O={class:"movie__info"},Y={class:"movie__t"},z={class:"modal__year"},D={class:"container main"},A={class:"loading__box"},M=["src"],R={class:"movies"},x=["onClick"],P=["onClick"],T=["src","alt"],G=(0,t._)("div",{class:"movie__cover--darkened"},null,-1),j={class:"movie__info"},U={class:"movie__title"},K={class:"movie__category"},N={key:0,class:"movie__average movie__average--green"},E={key:1,class:"movie__average movie__average--orange"},L={key:2,class:"movie__average movie__average--red"},J={key:3,class:"movie__average movie__average--green"},Q={key:4,class:"movie__average movie__average--orange"},V={key:5,class:"movie__average movie__average--red"},q=["onClick"],H={d:"M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.571 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181"},X=["onClick"],B={class:"st0",d:"M17.7,1c-2.2,0-4.4,1-5.7,3.2C10.7,2,8.5,1,6.3,1C3.1,1,0,3.2,0,7.2c0,4.7,5.6,9.4,12,15.8 c6.4-6.4,12-11.1,12-15.8C24,3.2,20.9,1,17.7,1z"},W={id:"myModal",class:"modal"},Z={class:"modal__container"},$=["src","alt"],ee={class:"modal__box"},ie={class:"modal__title"},ae={class:"modal__year"},se={class:"modal__text"},te={class:"modal__pg"},re=(0,t.Uk)(),ne={class:"loading__box"},oe=["src"],le={name:"App",data(){return{api:"https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS",out:"",simbol:"",simbolYear:"",simbolYearFrom:"",form:{searchQuery:""},searchQuery:"",page:1,pageString:"&page=",order:"",orderString:"order=",genres:"",genresString:"genres=",yearFrom:"",yearFromString:"yearFrom=",yearToString:"yearTo=",defaultImg:l,apiArray:[],restaurants:[],restaurant:[],modalRestaurant:[],error:null,visible:!1,loading:!1,loading1:!1,headers:{"Content-Type":"application/json","X-API-KEY":"236d1c9c-2de0-4ab3-a57f-f871ba0334a2"},likedFilmIds:[]}},methods:{AP(){},async popular(){console.log(this.page),this.page++,0===this.apiArray.length?await this.filter(this.api+this.pageString+this.page.toString()):await this.filterGenres(this.api+this.pageString+this.page.toString()),console.log(this.api+this.pageString+this.page.toString())},async SerchFilms(e){this.page=1,this.api="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword="+e,await this.filter(this.api)},async Details(e){void 0!=e&&(this.visible=!0,await this.modal("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+e))},async FilterGenres(){this.page=1,this.apiArray=[],""!=this.genres&&this.apiArray.push(this.genresString+this.genres),""!=this.order&&this.apiArray.push(this.orderString+this.order),""!=this.yearFrom&&this.apiArray.push(this.yearFromString+this.yearFrom+"&"+this.yearToString+this.yearFrom),this.api="https://kinopoiskapiunofficial.tech/api/v2.2/films?"+this.apiArray.join("&"),await this.filterGenres(this.api),this.loading=!1},async filter(e){this.loading=!0,console.log(e);try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i),1==this.page?this.restaurants=i.films:this.restaurants=this.restaurants.concat(i.films),this.loading=!1}catch(i){this.error=i}},async modal(e){try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i.description),this.modalRestaurant=i}catch(i){this.error=i}},async filterGenres(e){this.loading=!0;try{const i=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(i),1==this.page?this.restaurants=i.items:this.restaurants=this.restaurants.concat(i.items),this.loading=!1,this.loading1=!1}catch(i){this.error=i,this.loading=!1}},parseJSON:function(e){return e.json?e.json():e},checkStatus:function(e){return e.status>=200&&e.status<300?e:this.parseJSON(e).then((e=>{throw e}))},onChange(e){this.simbol=e.target.value,console.log(e.target.value),this.genres=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYear(e){this.simbolYear=e.target.value,console.log(e.target.value),this.order=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYearFrom(e){this.simbolYearFrom=e.target.value,console.log(e.target.value),this.yearFrom=e.target.value,this.FilterGenres(),this.loading1=!0},searchValue(e){this.searchQuery=e.target.value,console.log(e.target.value),this.SerchFilms(e.target.value)},Like(e){this.likedFilmIds.push(e)},disLike(e){this.likedFilmIds.splice(this.likedFilmIds.indexOf(e),1)},drawItems(e){this.popular(e.page++)},getMissingImg(e){return this.restaurants[e]?.posterUrlPreview??this.defaultImg},getMissingName(e){return this.restaurants[e]?.nameRu??" "},getMissingGenres(e){return this.restaurants[e]?.nameRu??" "}},async mounted(){localStorage.likedFilmIds&&(this.likedFilmIds=localStorage.likedFilmIds.split(",").map((e=>Number(e)))),console.log(localStorage.likedFilmIds),this.loading1=!0;try{const e=await fetch(this.api,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(e),console.log(Math.floor(101*Math.random())+1),this.restaurants=e.films,this.restaurant=e.films[Math.floor(20*Math.random())+1],this.loading1=!1}catch(e){this.error=e,this.loading1=!1}},watch:{likedFilmIds:{handler:function(e){console.log(e),localStorage.likedFilmIds=e},deep:!0}}};var ce=Object.assign(le,{setup(e){return(e,i)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("header",c,[(0,t._)("div",h,[g,(0,t.wy)((0,t._)("select",{name:"",id:"year1",class:"header__year1 action","onUpdate:modelValue":i[0]||(i[0]=e=>(0,r.dq)(simbolYearFrom)?simbolYearFrom.value=e:null),onChange:i[1]||(i[1]=i=>e.onChangeYearFrom(i))},[d,((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(100,(e=>(0,t._)("option",{value:e+1922,key:e+1922},(0,n.zw)(e+1922),9,u))),64))],544),[[s.bM,e.simbolYearFrom]]),(0,t.wy)((0,t._)("select",{name:"",id:"year",class:"header__year action","onUpdate:modelValue":i[2]||(i[2]=e=>(0,r.dq)(simbolYear)?simbolYear.value=e:null),onChange:i[3]||(i[3]=i=>e.onChangeYear(i))},v,544),[[s.bM,e.simbolYear]]),(0,t.wy)((0,t._)("select",{name:"",id:"genre",class:"header__genre action","onUpdate:modelValue":i[7]||(i[7]=e=>(0,r.dq)(simbol)?simbol.value=e:null),onChange:i[8]||(i[8]=i=>e.onChange(i))},[(0,t._)("option",{value:"1",onClick:i[4]||(i[4]=i=>e.AP())},"Tриллер"),(0,t._)("option",{value:"2",onClick:i[5]||(i[5]=i=>e.AP())},"Драма"),(0,t._)("option",{value:"3",onClick:i[6]||(i[6]=i=>e.AP())},"Криминал"),f,y,w,k],544),[[s.bM,e.simbol]]),b,(0,t._)("form",null,[(0,t.wy)((0,t._)("input",{type:"text",class:"header__search",placeholder:"Search",onInput:i[9]||(i[9]=i=>e.searchValue(i)),"onUpdate:modelValue":i[10]||(i[10]=i=>e.form.searchQuery=i)},null,544),[[s.nr,e.form.searchQuery]])])])]),(0,t._)("div",F,[(0,t._)("div",S,[(0,t._)("div",I,[(0,t._)("img",{src:e.restaurant.posterUrlPreview,alt:e.restaurant.nameRu,class:"movie__cover1"},null,8,C),(0,t._)("div",O,[(0,t._)("div",Y,(0,n.zw)(e.restaurant.nameRu),1),(0,t._)("p",z,(0,n.zw)(e.restaurant.year),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.restaurant.genres,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"movie__c",key:e.genre},(0,n.zw)(e.genre),1)))),128))])])])]),(0,t._)("div",D,[(0,t.Uk)((0,n.zw)(e.searchQuery)+" ",1),(0,t._)("div",A,[(0,t.wy)((0,t._)("span",null,[(0,t._)("img",{class:"loading",src:(0,r.SU)(o),alt:"loading"},null,8,M)],512),[[s.F8,e.loading1]])]),(0,t._)("div",R,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.restaurants,((i,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"movie",onClick:a=>e.Details(i.kinopoiskId),key:i.kinopoiskId},[(0,t._)("div",{class:"movie__cover-inner",onClick:a=>e.Details(i.filmId)},[(0,t._)("img",{src:e.getMissingImg(a),alt:e.getMissingName(a),class:"movie__cover"},null,8,T),G],8,P),(0,t._)("div",j,[(0,t._)("div",U,(0,n.zw)(e.getMissingName(a)),1),(0,t._)("div",K,(0,n.zw)(i?.genres?.map((e=>e?.genre)).join(", ")??" "),1),i?.rating>=7?((0,t.wg)(),(0,t.iD)("div",N,(0,n.zw)(i?.rating),1)):i?.rating>5?((0,t.wg)(),(0,t.iD)("div",E,(0,n.zw)(i?.rating),1)):i?.rating<=5?((0,t.wg)(),(0,t.iD)("div",L,(0,n.zw)(i?.rating),1)):(0,t.kq)("",!0),i?.ratingKinopoisk>=7?((0,t.wg)(),(0,t.iD)("div",J,(0,n.zw)(i?.ratingKinopoisk),1)):i?.ratingKinopoisk>5?((0,t.wg)(),(0,t.iD)("div",Q,(0,n.zw)(i?.ratingKinopoisk),1)):i?.ratingKinopoisk<=5?((0,t.wg)(),(0,t.iD)("div",V,(0,n.zw)(i?.ratingKinopoisk),1)):(0,t.kq)("",!0),(0,t._)("div",null,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("svg",{onClick:a=>e.Like(i.filmId),class:"movie__svg movie__svg--white",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},[(0,t.wy)((0,t._)("path",H,null,512),[[s.F8,!e.likedFilmIds.includes(i.filmId)]])],8,q)),[[s.F8,!e.likedFilmIds.includes(i.filmId)]]),(0,t.wy)(((0,t.wg)(),(0,t.iD)("svg",{onClick:a=>e.disLike(i.filmId),class:"movie__svg movie__svg--red",width:"24",height:"24","xml:space":"preserve"},[(0,t.wy)((0,t._)("path",B,null,512),[[s.F8,e.likedFilmIds.includes(i.filmId)]])],8,X)),[[s.F8,e.likedFilmIds.includes(i.filmId)]])])])],8,x)))),128))])]),(0,t.wy)((0,t._)("div",W,[(0,t._)("span",{class:"close",onClick:i[11]||(i[11]=i=>e.visible=!1)},"×"),(0,t._)("div",Z,[(0,t._)("img",{class:"modal-content",id:"img01",src:e.modalRestaurant.posterUrlPreview,alt:e.modalRestaurant.nameOriginal},null,8,$),(0,t._)("div",ee,[(0,t._)("h4",ie,(0,n.zw)(e.modalRestaurant.nameOriginal),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.modalRestaurant.genres,(e=>((0,t.wg)(),(0,t.iD)("h5",{class:"modal__genre",key:e},(0,n.zw)(e.genre),1)))),128)),(0,t._)("p",ae,(0,n.zw)(e.modalRestaurant.year),1),(0,t._)("div",se,(0,n.zw)(e.modalRestaurant.description),1),(0,t._)("p",te,(0,n.zw)(e.modalRestaurant.ratingAgeLimits),1)])])],512),[[s.F8,e.visible]]),re,(0,t._)("div",ne,[(0,t.wy)((0,t._)("span",null,[(0,t._)("img",{class:"loading",src:(0,r.SU)(o),alt:"loading"},null,8,oe)],512),[[s.F8,e.loading]])]),(0,t._)("button",{class:"next__page",onClick:i[13]||(i[13]=i=>e.popular())},[(0,t._)("span",{onClick:i[12]||(i[12]=i=>e.AP())},"Show more")])],64))}});const he=ce;var ge=he;const de=(0,s.ri)(ge);de.mount("#app")}},i={};function a(s){var t=i[s];if(void 0!==t)return t.exports;var r=i[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(i,s,t,r){if(!s){var n=1/0;for(h=0;h<e.length;h++){s=e[h][0],t=e[h][1],r=e[h][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(h--,1);var c=t();void 0!==c&&(i=c)}}return i}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[s,t,r]}}(),function(){a.d=function(e,i){for(var s in i)a.o(i,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(i){return 0===e[i]};var i=function(i,s){var t,r,n=s[0],o=s[1],l=s[2],c=0;if(n.some((function(i){return 0!==e[i]}))){for(t in o)a.o(o,t)&&(a.m[t]=o[t]);if(l)var h=l(a)}for(i&&i(s);c<n.length;c++)r=n[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(h)},s=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5660)}));s=a.O(s)})();
//# sourceMappingURL=app.7c193cfc.js.map